rm(list=ls())
library(ggplot2)
library(reshape2)
## Basicl model structure
##set some intial paramteres
##length of time series (years)
simulation.length <- 100
##the size of the reef (number of niches wide)
reef.size <- 20
##source in the functions for life history stratergies
#source("...")
##build a data set of the different types of corals (structure and stratergy for growth)
coral.types<-data.frame(expand.grid(data.frame("Structure"=c("Massive", "Branching", "Folio", "Plating"), "Stratergy"=c("Competitive", "Weedy","Resistant", "Generalist"))))
coral.types$unique.ID<-paste(coral.types$Structure, coral.types$Stratergy, sep="+")
##simulate an initial structure for the reef (both age and spatial). Current set to randomly select from a uniform distribution for structure
##and from a gamma distrubition for age rounded to whole numbers
##(we should estimate these from data by fitting a gamm distribution to the age data from a reef, if possible)
initial.spp.structure <- sample(coral.types$unique.ID, size=reef.size, replace=T)
initial.age.structure <- round(rgamma(reef.size, shape=1, scale=40))
##plot out the starting structure of the reef
ggplot(data=data.frame(x=1:length(initial.spp.structure), initial.spp.structure), aes(x=x))+geom_bar(aes(fill=initial.spp.structure), width=1)+theme_bw()
##and age structure
hist(initial.age.structure)
##plot out the starting structure of the reef
ggplot(data=data.frame(x=1:length(initial.spp.structure), initial.spp.structure), aes(x=x))+geom_bar(aes(fill=initial.spp.structure), width=1)+theme_bw()
